{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    galleryContainer: document.querySelector(\".gallery\"),\n    loader: document.querySelector(\".loader\"),\n    loaderBtn: document.querySelector(\".load-more-btn\"),\n}\n\nfunction randomImages ({webformatURL,largeImageURL,tags,likes,views,comments,downloads}) {\n    return `<li class=\"gallery-container\">\n  <a href=\"${largeImageURL}\" class=\"gallery-container-a\">\n    <img class=\"gallery-container-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n  </a>\n  <ul class=\"img-info-list\">\n    <li class=\"img-description\">\n      <h3 class=\"description-headerline\">Likes</h3>\n      <p class=\"description-text\">${likes}</p>\n    </li>\n    <li class=\"img-description\">\n      <h3 class=\"description-headerline\">Views</h3>\n      <p class=\"description-text\">${views}</p>\n    </li>\n    <li class=\"img-description\">\n      <h3 class=\"description-headerline\">Comments</h3>\n      <p class=\"description-text\">${comments}</p>\n    </li>\n    <li class=\"img-description\">\n      <h3 class=\"description-headerline\">Downloads</h3>\n      <p class=\"description-text\">${downloads}</p>\n    </li>\n  </ul>\n</li>`\n}\n\nlet simplelightbox = new SimpleLightbox('.gallery-container-a ', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  refresh: true,\n});\n\nfunction createGallery (images) {\n    const markup = images.map(image => randomImages(image)).join('');\n    refs.galleryContainer.insertAdjacentHTML('beforeend', markup);\n    simplelightbox.refresh();\n}\n\nfunction clearGallery () {\n    refs.galleryContainer.innerHTML = '';\n}\n\nfunction showLoader () {\n    refs.loader.style.display = 'block';\n}\n\nfunction hideLoader () {\n    refs.loader.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\n    refs.loaderBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n    refs.loaderBtn.style.display = 'none';\n}\n\nexport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n}","import axios from 'axios';\n\nexport async function getImagesByQuery (query,page) {{\n    const per_page = 15;\n    const currentPage = page ?? 1;\n\n    try {\n        const responce = await axios.get ('https://pixabay.com/api/', {\n        params: {\n            key: '53618010-1b89e63a15719169e29158a57',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: per_page,\n            page:currentPage,\n        }\n    });\n     return responce.data;\n    }catch (error) {\n        console.error(error);\n    }\n   \n}}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { \n    clearGallery, \n    hideLoader, \n    showLoader, \n    createGallery, \n    hideLoadMoreButton,\n    showLoadMoreButton\n} from \"./js/render-functions\";\nimport { getImagesByQuery } from './js/pixabay-api';\n\nconst refs = {\n    form: document.querySelector(\".form\"),\n    loader: document.querySelector(\".loader\"),\n    loaderBtn: document.querySelector(\".load-more-btn\"),\n    gallery: document.querySelector(\".gallery\"),\n};\n\n    let query = \"\";\n    let currentPage = 1;\n    const per_page = 15;\n    let totalHits = 0;\n\n    hideLoadMoreButton();\n\nrefs.form.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n\n\n\n    const serchQuery = event.target.elements['search-text'].value.trim();\n\n    if (!serchQuery) {\n        iziToast.error({\n            message: 'Please enter a search query',\n            messageColor: 'white',\n            messageSize: '20',\n            backgroundColor: 'red',\n            position: 'topRight',\n            timeout: 2000,\n        });\n        return;\n    }\n\n    clearGallery();\n    hideLoadMoreButton();\n    query = serchQuery;\n    currentPage = 1;\n    showLoader();\n    \n   try {\n     const data = await getImagesByQuery(serchQuery, currentPage, per_page)\n         if (!data || data.hits.length === 0) {\n            hideLoader();\n                iziToast.error({\n                    message: 'No images found. Please try again.',\n                    messageColor: 'white',\n                    messageSize: '20',\n                    backgroundColor: 'red',\n                    position: 'topRight',\n                    timeout: 2000,\n                });\n                return;\n            }\n\n        totalHits = data.totalHits;\n        createGallery(data.hits);\n\n        if(currentPage * per_page < totalHits){\n            showLoadMoreButton();\n        }else{\n            hideLoadMoreButton();\n        }\n   }catch(error){\n        iziToast.error({\n            message: \"Something went wrong\",\n            messageColor: 'white',\n            messageSize: '20',\n            backgroundColor: 'red',\n            position: 'topRight',\n            timeout: 2000,\n        });\n        hideLoadMoreButton();\n   } finally {\n        hideLoader();\n        refs.form.reset();\n   }\n});\n\nrefs.loaderBtn.addEventListener(\"click\", async ()=> {\n       currentPage += 1;\n        hideLoadMoreButton();\n        showLoader();\n\n    try{\n        const data = await getImagesByQuery(query, currentPage, per_page);\n\n        createGallery(data.hits);\n\n        const firsCart = document.querySelector('.gallery-container');\n        if (firsCart) {\n            const { height: cardHeight } = firsCart.getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n\n        if (currentPage * per_page < totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"You've reached the end of search results.\",\n                messageColor: 'white',\n                messageSize: '20',\n                backgroundColor: 'red',\n                position: 'topRight',\n                timeout: 2000,\n            });\n        }\n        }catch(error) {\n            iziToast.error({\n                message: \"Something went wrong\",\n                messageColor: 'white',\n                messageSize: '20',\n                backgroundColor: 'red',\n                position: 'topRight',\n                timeout: 2000,\n            });\n        }\n        finally {\n            hideLoader();\n        }\n    }\n);\n          \n        \n"],"names":["refs","randomImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","simplelightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","page","currentPage","axios","error","per_page","totalHits","event","serchQuery","iziToast","data","firsCart","cardHeight"],"mappings":"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"}